<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Pause My Game" Height="600" Width="800"
        Background="#2b2b2b"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">
    <Window.Resources>
        <Style x:Key="DarkButton" TargetType="Button">
            <Setter Property="Background" Value="#FF090909"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#4a4d4f"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="IconButton" TargetType="Button" BasedOn="{StaticResource DarkButton}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Margin" Value="0,0,5,0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- 菜单栏和全屏按钮 -->
        <Grid Grid.Row="0" Background="#3c3f41">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="191*"/>
                <ColumnDefinition Width="609*"/>
            </Grid.ColumnDefinitions>
            <Menu Background="Transparent" Foreground="#ffffff" Grid.ColumnSpan="2">
                <MenuItem Header="File" Foreground="#ffffff">
                    <MenuItem Header="Add" Click="AddProgram_Click" Foreground="#000000"/>
                    <MenuItem Header="Reload Config" Click="ReloadConfig_Click" Foreground="#000000"/>
                    <MenuItem Header="Edit Config" Click="EditConfig_Click" Foreground="#000000"/>
                    <MenuItem Header="Show Database" Click="ShowDatabase_Click" Foreground="#000000"/>
                    <Separator/>
                    <MenuItem Header="Exit" Click="Exit_Click" Foreground="#000000"/>
                </MenuItem>
                <MenuItem Header="Tools" Foreground="#ffffff">
                    <MenuItem Header="taskmgr - 任务管理器" Click="OpenTaskManager_Click" Foreground="#000000"/>
                    <MenuItem Header="resmon.exe - 资源监视器" Click="Openresmon_Click" Foreground="#000000"/>
                    <MenuItem Header="devmgmt.msc - 设备管理器" Click="Opendevmgmt_Click" Foreground="#000000"/>
                    <MenuItem Header="ncpa.cpl - 网络连接" Click="Openncpa_Click" Foreground="#000000"/>
                    <MenuItem Header="wf.msc - 防火墙" Click="Openwf_Click" Foreground="#000000"/>
                    <MenuItem Header="diskmgmt.msc - 磁盘管理" Click="Opendiskmgmt_Click" Foreground="#000000"/>
                    <MenuItem Header="msinfo32.exe - 系统信息" Click="Openmsinfo32_Click" Foreground="#000000"/>
                    <MenuItem Header="powershell" Click="Openpowershell_Click" Foreground="#000000"/>
                    <MenuItem Header="cmd - 命令提示符" Click="Opencmd_Click" Foreground="#000000"/>
                </MenuItem>
                <MenuItem Header="Hotkeys" Foreground="#ffffff">
                    <MenuItem x:Name="PauseHotkeyMenuItem" Header="Pause (Ctrl+Alt+P)" Click="PauseGame_Click" Foreground="#000000"/>
                    <MenuItem x:Name="ResumeHotkeyMenuItem" Header="Resume (Ctrl+Alt+R)" Click="ResumeGame_Click" Foreground="#000000"/>
                    <Separator/>
                    <MenuItem Header="Configure Hotkeys" Click="ConfigHotkeys_Click" Foreground="#000000"/>
                </MenuItem>
                <MenuItem Header="Help" Foreground="#ffffff">
                    <MenuItem Header="GitHub-使用帮助" Click="OpenGitHub_Click" Foreground="#000000"/>
                    <MenuItem Header="pssuspend-需要额外下载的插件" Click="OpenPssuspend_Click" Foreground="#000000"/>
                    <MenuItem Header="bilibili-教程" Click="OpenBilibili_Click" Foreground="#000000"/>
                </MenuItem>
            </Menu>
            <Button Content="🡻" Click="Exit_Click" HorizontalAlignment="Left" Cursor="Hand" Width="40" Background="Transparent" Foreground="#FFEFEFEF" BorderThickness="0" Margin="569,0,0,0" ToolTip="exit" Grid.Column="1"/>
        </Grid>

        <!-- 主内容区域 -->
        <Grid Grid.Row="1" Margin="10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="250"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧：程序列表 -->
            <Border Background="#3c3f41" CornerRadius="5" Margin="0,0,10,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- 列表操作按钮 -->
                    <Grid Grid.Row="0" Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Orientation="Horizontal">
                            <Button Content="🔍" Click="SearchProcess_Click" Style="{StaticResource IconButton}" ToolTip="Search Top Processes" Foreground="White"/>
                            <Button Content="➕" Click="AddProgram_Click" Style="{StaticResource IconButton}" ToolTip="Add Game"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                            <Button Content="🗑️" Click="DeleteGame_Click" Style="{StaticResource IconButton}" ToolTip="Delete Game"/>
                        </StackPanel>
                    </Grid>

                    <ListBox x:Name="ProgramListBox" 
                             Grid.Row="1"
                             Background="#3c3f41" 
                             Foreground="#ffffff"
                             BorderThickness="0"
                             MinWidth="230"
                             HorizontalContentAlignment="Stretch"
                             SelectionChanged="ProgramListBox_SelectionChanged"
                             PreviewMouseLeftButtonDown="ProgramListBox_PreviewMouseLeftButtonDown"
                             MouseMove="ProgramListBox_MouseMove"
                             DragOver="ProgramListBox_DragOver"
                             Drop="ProgramListBox_Drop"
                             AllowDrop="True">
                        <ListBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Delete" Click="DeleteGame_Click"/>
                            </ContextMenu>
                        </ListBox.ContextMenu>
                        <ListBox.Resources>
                            <Style TargetType="ListBoxItem">
                                <Setter Property="Padding" Value="10,8"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListBoxItem">
                                            <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                                                <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsSelected" Value="true">
                                                    <Setter Property="Background" TargetName="Bd" Value="#4b6eaf"/>
                                                    <Setter Property="Foreground" Value="#ffffff"/>
                                                </Trigger>
                                                <Trigger Property="IsMouseOver" Value="true">
                                                    <Setter Property="Background" TargetName="Bd" Value="#4a4d4f"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </ListBox.Resources>
                    </ListBox>

                    <TextBlock Grid.Row="2" Text="Game loaded: 0" x:Name="InfoLabel" Foreground="#787878" Margin="10,5"/>
                </Grid>
            </Border>

            <!-- 右侧：控制面板 -->
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="3*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 图标显示区域 -->
                <Viewbox Grid.Row="0" Stretch="Uniform" Margin="0,0,0,10" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Border CornerRadius="5" Padding="20">
                        <StackPanel x:Name="IconPanel" HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="选择程序显示图标" Foreground="#787878" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </StackPanel>
                    </Border>
                </Viewbox>

                <!-- 状态显示 -->
                <TextBlock Grid.Row="1" x:Name="StatusLabel" Text="Game Status untouched" Foreground="#787878" HorizontalAlignment="Center" Margin="0,0,0,10" FontSize="16"/>

                <!-- 控制按钮 -->
                <Viewbox Grid.Row="2" Stretch="Uniform" VerticalAlignment="Top">
                    <StackPanel HorizontalAlignment="Center" Margin="20">
                        <Button Click="PauseGame_Click" Style="{StaticResource DarkButton}" Foreground="#FF8E53" Width="200" Height="50" Margin="0,5" FontWeight="Bold" FontSize="18">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="⏸" Margin="0,0,10,0"/>
                                <TextBlock Text="暂停"/>
                            </StackPanel>
                        </Button>
                        <Button Click="ResumeGame_Click" Style="{StaticResource DarkButton}" Foreground="#4ECDC4" Width="200" Height="50" Margin="0,5" FontWeight="Bold" FontSize="18">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="▶" Margin="0,0,10,0"/>
                                <TextBlock Text="恢复"/>
                            </StackPanel>
                        </Button>
                        <Button Click="KillGame_Click" Style="{StaticResource DarkButton}" Foreground="#FF6B6B" Width="200" Height="50" Margin="0,5" FontWeight="Bold" FontSize="18">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="💀" Margin="0,0,10,0"/>
                                <TextBlock Text="杀死"/>
                            </StackPanel>
                        </Button>
                        <Button Click="LaunchGame_Click" Style="{StaticResource DarkButton}" Foreground="#70AD07" Width="200" Height="50" Margin="0,5" FontWeight="Bold" FontSize="18">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="🚀" Margin="0,0,10,0"/>
                                <TextBlock Text="启动"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Viewbox>

                <!-- 配置按钮 -->
                <StackPanel Grid.Row="3" HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,20">
                    <Separator Margin="0,0,0,10" Width="200" Background="#3c3f41"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <!-- <Button Content="Edit Config" Click="EditConfig_Click" Style="{StaticResource DarkButton}" Foreground="#A8E6CF" Width="120" Height="30" Margin="5" FontWeight="Bold"/>
                        <Button Content="Reload Config" Click="ReloadConfig_Click" Style="{StaticResource DarkButton}" Foreground="#FFD93D" Width="120" Height="30" Margin="5" FontWeight="Bold"/>
                        -->
                        <Button Content="⛶ 全屏" Click="ToggleFullScreen_Click" Style="{StaticResource DarkButton}" Width="100" Height="30" Foreground="White" ToolTip="Toggle Full Screen"  Margin="5" FontWeight="Bold"/>
                        <Button Content="⏻ 退出" Click="Quit_Click" Style="{StaticResource DarkButton}" 
                        Foreground="#FF6B6B"  Width="100" Height="30" Margin="5" FontWeight="Bold" ToolTip="Exit Application"/>

                    </StackPanel>
                </StackPanel>


            </Grid>
        </Grid>
    </Grid>
</Window>
